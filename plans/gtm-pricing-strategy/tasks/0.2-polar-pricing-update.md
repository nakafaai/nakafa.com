# Task 1.2: Polar Pricing Update

## üéØ Goal

Update Polar product pricing from $49/month to $8.99/month for international market.

## üìç Context

**Current State:**
- Polar product price: $49/month
- No paying customers yet (safe to change)
- International market only (Indonesia uses QRIS.id)

**Why $8.99:**
- Competitive with AI tools (ChatGPT $20, Claude $20)
- 55% cheaper than competitors
- Good margin (55% after AI costs)
- Charm pricing ($8.99 vs $9)

**Can Run In Parallel:** This task doesn't depend on QRIS.id approval

## PRD

```json
{
  "category": "configuration",
  "description": "Update Polar product price from $49 to $8.99 for international market",
  "steps": [
    "Login to Polar dashboard",
    "Update product price to $8.99",
    "Update checkout configuration",
    "Test checkout flow",
    "Verify pricing displays correctly"
  ],
  "passes": false
}
```

## üé¨ Success Criteria

- [ ] Polar product price updated to $8.99
- [ ] Checkout flow tested and working
- [ ] Webhook handlers updated (if needed)
- [ ] Pricing displays correctly on frontend
- [ ] Old $49 price no longer active

## Commands

```bash
# From root directory
pnpm --filter www dev
pnpm --filter backend dev
```

## üìù Subtasks

### Subtask 1.2.1: Update Polar Dashboard

Change product pricing in Polar dashboard.

**URL**: https://polar.sh/dashboard

**Steps:**

1. Login to Polar dashboard
2. Navigate to Products
3. Select "Nakafa Pro" product
4. Click Edit
5. Change price from $49.00 to $8.99
6. Save changes

**Verification:**

```typescript
// Check updated product
const product = await polar.products.get(polarClient, {
  id: "your-product-id"
});

console.log(product.prices[0].price_amount); // Should be 899 (cents)
```

**Output**: Polar product price updated to $8.99

---

### Subtask 1.2.2: Update Environment Configuration

Verify product IDs are correct in environment variables.

**File**: `packages/backend/convex/utils/polar.ts`

```typescript
export const products = {
  pro: {
    sandbox: "your-sandbox-product-id",
    production: "your-production-product-id",
  },
};

export const pricing = {
  international: {
    amount: 8.99,
    currency: "USD",
    display: "$8.99",
  },
};
```

**Environment Variables:**

```bash
# packages/backend/.env.local
POLAR_ACCESS_TOKEN=polar_oat_...
POLAR_WEBHOOK_SECRET=polar_whs_...
NEXT_PUBLIC_POLAR_SERVER=sandbox  # or "production"
```

**Output**: Configuration updated and verified

---

### Subtask 1.2.3: Test Checkout Flow

Test international checkout flow with new pricing.

**Test Steps:**

1. Start development server:
```bash
pnpm --filter www dev
pnpm --filter backend dev
```

2. Use VPN or location spoofing to simulate international user
3. Navigate to pricing page
4. Verify price shows "$8.99/month"
5. Click "Get Pro"
6. Complete Polar checkout (use test card: 4242 4242 4242 4242)
7. Verify subscription activates

**Test Card:**
- Number: 4242 4242 4242 4242
- Expiry: Any future date
- CVC: Any 3 digits

**Expected Result:**
- Checkout shows $8.99
- Payment succeeds
- Subscription created in Convex
- User gets Pro access

**Output**: Checkout flow tested and working

---

### Subtask 1.2.4: Update Frontend Display

Ensure frontend shows correct pricing for international users.

**File**: `apps/www/components/payments/PricingCard.tsx`

```tsx
export function PricingCard({ location }: { location: "ID" | "INTL" }) {
  const pricing = location === "ID" 
    ? { amount: 89000, currency: "IDR", display: "Rp 89.000" }
    : { amount: 8.99, currency: "USD", display: "$8.99" };

  return (
    <div className="pricing-card">
      <h2>Nakafa Pro</h2>
      <div className="price">{pricing.display}</div>
      <div className="period">/month</div>
      <button onClick={handleSubscribe}>
        Get Pro
      </button>
    </div>
  );
}
```

**Output**: Frontend displays correct regional pricing

---

## üöÄ Next Steps

After completing this task:

1. **Next task**: Task 1.3 - Implement Regional Pricing Detection
2. **Can proceed**: Frontend development while waiting for QRIS.id

## üîó Related Tasks

- Task 1.1: QRIS.id Registration (parallel)
- Task 1.3: Regional Pricing Detection (next)
- Task 1.4: Frontend Checkout (uses this pricing)

## ‚ö†Ô∏è Important Notes

### Pricing Psychology

**Why $8.99 works:**
- Charm pricing (just under $9)
- Perceived as "under $10"
- 55% cheaper than ChatGPT ($20)
- Premium feel vs free alternatives

### Grandfathering

Since no paying customers:
- ‚úÖ No grandfathering needed
- ‚úÖ Clean slate for new pricing
- ‚úÖ No migration complexity

### Testing

**Must Test:**
- [ ] Price displays correctly
- [ ] Checkout flow works
- [ ] Webhook receives event
- [ ] Subscription activates
- [ ] Pro features unlock

**Test Scenarios:**
- New user signup ‚Üí subscribe
- Existing user ‚Üí upgrade
- Cancel ‚Üí resubscribe

### Progress Tracking

After completing this task, update `plans/gtm-pricing-strategy/progress.txt`:

```txt
[YYYY-MM-DD HH:mm] Task 1.2 completed

Key decisions:
- Updated Polar price from $49 to $8.99
- International market only (Indonesia uses QRIS)
- No grandfathering needed (no existing customers)

Files changed:
- packages/backend/convex/utils/polar.ts (pricing config)
- apps/www/components/payments/PricingCard.tsx (display)

Blockers/notes:
- None. Ready for frontend integration.
```
