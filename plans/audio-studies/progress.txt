# Audio Studies Implementation Progress

## Overview
Implementation plan for Audio Studies feature - AI-generated podcast audio for educational content.

## Tasks

### Setup Phase (0.x) ✅ COMPLETE
- [x] **0.1-voice-config.md** - Voice configuration (Nina voice with ElevenLabs API docs)
- [x] **0.2-schema.md** - Database schema (contentAudios, userContentAudios)
- [x] **0.3-article-queries.md** - Add getById to articleContents
- [x] **0.4-subject-queries.md** - Add getById to subjectSections

### Core Implementation Phase (1.x)
- [ ] **1.1-create-actions.md** - AI actions (script + speech generation)
- [ ] **1.2-create-queries.md** - Queries (public + internal)
- [ ] **1.3-create-mutations.md** - Mutations with workflow integration
- [ ] **1.4-create-workflow.md** - Durable workflow orchestration

### Integration Phase (2.x)
- [ ] **2.1-integrate-content-sync.md** - Content update invalidation

## Current Status
- Phase 0: 4/4 tasks completed ✅
- Phase 1: 0/4 tasks completed
- Phase 2: 0/1 tasks completed

## Completed Setup Phase

### ✅ Task 0.1: Voice configuration
- File: `packages/ai/config/voices.ts`
- Features: Nina voice with official ElevenLabs API docs
- Type-safe with interfaces and helper functions

### ✅ Task 0.2: Database schema
- File: `packages/backend/convex/audioStudies/schema.ts`
- Tables: contentAudios, userContentAudios
- Proper indexes for efficient queries
- Updated main schema.ts with import
- Typecheck: ✅ Passing

### ✅ Task 0.3 & 0.4: Content queries
- Files: 
  - `packages/backend/convex/articleContents/queries.ts`
  - `packages/backend/convex/subjectSections/queries.ts`
- Both use convex-helpers validators (`vv.id()`)
- Export reusable types with `Infer<typeof validator>`
- Typecheck: ✅ Passing

## Convex-Helpers Patterns Used
```typescript
// Type-safe ID validation
import { vv } from "@repo/backend/convex/lib/validators";
args: { id: vv.id("articleContents") }

// Reusable validators with exported types
const contentValidator = v.object({...});
export type ContentType = Infer<typeof contentValidator>;
returns: v.union(contentValidator, v.null())
```

## Next Task
**Task 1.1: Create AI Actions**
- File: `packages/backend/convex/audioStudies/actions.ts`
- Create generateScript and generateSpeech internal actions
- Uses AI SDK and ElevenLabs for audio generation

## Commands
```bash
pnpm --filter @repo/backend typecheck
```
