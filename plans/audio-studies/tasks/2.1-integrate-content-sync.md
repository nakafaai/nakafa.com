# Task 2.1: Integrate Content Sync with Audio Invalidation

## Goal
Invalidate cached audio when content is updated.

## Files
- `packages/backend/convex/articleContents/mutations.ts`
- `packages/backend/convex/subjectSections/mutations.ts`

## Implementation

### Update articleContents/mutations.ts

Add to `upsertArticleContent` after updating:

```typescript
if (existing.contentHash !== args.contentHash) {
  await ctx.runMutation(internal.audioStudies.mutations.invalidate, {
    contentId: existing._id,
    contentType: "article",
    newHash: args.contentHash,
  });
}
```

### Update subjectSections/mutations.ts

Add to `upsertSubjectSection` after updating:

```typescript
if (existing.contentHash !== args.contentHash) {
  await ctx.runMutation(internal.audioStudies.mutations.invalidate, {
    contentId: existing._id,
    contentType: "subject",
    newHash: args.contentHash,
  });
}
```

## Commands
```bash
pnpm typecheck
```
