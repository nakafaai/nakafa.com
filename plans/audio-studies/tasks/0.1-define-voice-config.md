# Task 0.1: Define Voice Configuration

## üéØ Goal

Create the voice configuration file with 5 predefined ElevenLabs voices for the Audio Studies feature.

## üìç Context

Need to define which ElevenLabs voices users can choose from. Voices are predefined by us (not all ElevenLabs voices) to control quality and costs. Nina is the primary/default voice.

## PRD

```json
{
  "category": "architecture",
  "description": "Create voice configuration with 5 predefined voices (Nina, Alex, Sarah, David, Maya)",
  "steps": [
    "Create voices.ts config file",
    "Define 5 voice configurations with IDs and settings",
    "Export type-safe voice keys",
    "Verify voice settings are optimized for educational content"
  ],
  "passes": false
}
```

## üé¨ Success Criteria

- [ ] Voices config file exists at `packages/ai/config/voices.ts`
- [ ] 5 voices defined: nina, alex, sarah, david, maya
- [ ] Each voice has id, name, and settings (stability, similarityBoost, style)
- [ ] TypeScript exports are type-safe
- [ ] Nina is marked as primary/default

## Commands

```bash
pnpm typecheck
pnpm lint
```

## üìù Subtasks

### Subtask 0.1.1: Create Voices Configuration File

**File to create**: `packages/ai/config/voices.ts`

**Implementation**:

```typescript
/**
 * Predefined ElevenLabs voices for Audio Studies feature.
 * These are curated for educational content narration.
 */

export interface VoiceConfig {
  id: string;
  name: string;
  description: string;
  settings: {
    stability: number;
    similarityBoost: number;
    style?: number;
  };
}

export const PREDEFINED_VOICES = {
  /**
   * Nina - Primary voice
   * Clear, educational, perfect for learning content
   * Based on ElevenLabs "Rachel"
   */
  nina: {
    id: "21m00Tcm4TlvDq8ikWAM",
    name: "Nina",
    description: "Clear and educational, perfect for learning",
    settings: {
      stability: 0.5,
      similarityBoost: 0.75,
    },
  },

  /**
   * Alex - Energetic voice
   * Engaging and dynamic, great for younger audiences
   * Based on ElevenLabs "Domi"
   */
  alex: {
    id: "AZnzlk1XvdvUeBnXmlld",
    name: "Alex",
    description: "Energetic and engaging for exciting topics",
    settings: {
      stability: 0.4,
      similarityBoost: 0.8,
      style: 0.3,
    },
  },

  /**
   * Sarah - Calm voice
   * Soothing and relaxed, ideal for complex topics
   * Based on ElevenLabs "Bella"
   */
  sarah: {
    id: "EXAVITQu4vr4xnSDxMaL",
    name: "Sarah",
    description: "Calm and soothing for dense content",
    settings: {
      stability: 0.6,
      similarityBoost: 0.7,
    },
  },

  /**
   * David - Professional voice
   * Authoritative and formal, suited for academic content
   * Based on ElevenLabs "Elli"
   */
  david: {
    id: "MF3mGyEYCl7XYWbV9V6O",
    name: "David",
    description: "Professional and authoritative for formal content",
    settings: {
      stability: 0.55,
      similarityBoost: 0.72,
    },
  },

  /**
   * Maya - Friendly voice
   * Conversational and approachable
   * Based on ElevenLabs "Josh"
   */
  maya: {
    id: "TxGEqnHWrfWFTfGW9XjX",
    name: "Maya",
    description: "Friendly and conversational",
    settings: {
      stability: 0.45,
      similarityBoost: 0.78,
      style: 0.2,
    },
  },
} as const satisfies Record<string, VoiceConfig>;

export type VoiceKey = keyof typeof PREDEFINED_VOICES;

/**
 * Default voice for new audio studies
 */
export const DEFAULT_VOICE_KEY: VoiceKey = "nina";

/**
 * Get voice configuration by key
 */
export function getVoiceConfig(key: VoiceKey): VoiceConfig {
  return PREDEFINED_VOICES[key];
}

/**
 * Get all available voice keys
 */
export function getVoiceKeys(): VoiceKey[] {
  return Object.keys(PREDEFINED_VOICES) as VoiceKey[];
}

/**
 * Validate if a string is a valid voice key
 */
export function isValidVoiceKey(key: string): key is VoiceKey {
  return key in PREDEFINED_VOICES;
}
```

**Output**: Voice configuration file with 5 predefined voices, type-safe exports, and helper functions.

---

## üöÄ Next Steps

After this task:
- Next: Task 0.2 (Create contentAudios schema)
- Dependencies: None

## üîó Related Tasks

- Task 0.2: Uses voice keys for schema validation
- Task 5.1: Uses voices for generating preview samples

## ‚ö†Ô∏è Important Notes

### Voice ID Verification

These voice IDs are from ElevenLabs documentation. Before production, verify they work with your API key:

```bash
curl -X GET "https://api.elevenlabs.io/v1/voices" \
  -H "xi-api-key: YOUR_API_KEY"
```

### Settings Optimization

Voice settings are tuned for educational content:
- **Stability 0.4-0.6**: Balanced consistency vs expressiveness
- **Similarity Boost 0.7-0.8**: Strong voice cloning without artifacts
- **Style 0.2-0.3** (Alex/Maya): Slight expressiveness boost

Adjust based on testing results.
