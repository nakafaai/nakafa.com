# Task 2.3: Update Provider Component

## Goal

Replace ConvexBetterAuthProvider with ConvexAuthProvider.

## Implementation

Update `apps/www/components/providers/convex.tsx`:

```typescript
"use client";

import { ConvexAuthProvider } from "better-convex/auth-client";
import { ConvexReactClient } from "convex/react";
import { useRouter } from "next/navigation";
import type { ComponentProps, ReactNode } from "react";
import { env } from "@/env";
import { authClient } from "@/lib/auth/client";

const convex = new ConvexReactClient(env.NEXT_PUBLIC_CONVEX_URL, { verbose: false });

export function ConvexProvider({
  children,
  initialToken,
}: {
  children: ReactNode;
  initialToken?: ComponentProps<typeof ConvexAuthProvider>["initialToken"];
}) {
  const router = useRouter();

  return (
    <ConvexAuthProvider
      authClient={authClient}
      client={convex}
      initialToken={initialToken}
      onMutationUnauthorized={() => router.push("/login")}
      onQueryUnauthorized={({ queryName }) => {
        console.warn(`Unauthorized query: ${queryName}`);
        router.push("/login");
      }}
    >
      {children}
    </ConvexAuthProvider>
  );
}
```

## Remove AuthBoundary

If you have an AuthBoundary component, remove it. The new provider handles auth errors via callbacks.

## Verification

- [ ] Uses ConvexAuthProvider
- [ ] Error handlers configured
- [ ] TypeScript compiles

## Next

Task 2.4: Run Data Migration Script
