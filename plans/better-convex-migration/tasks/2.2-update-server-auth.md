# Task 2.2: Update Server-Side Auth

## Goal

Update Next.js server-side auth utilities.

## Implementation

Update `apps/www/lib/auth/server.ts`:

```typescript
import { api } from "@convex/api";
import { convexBetterAuth } from "better-convex/auth-nextjs";
import { env } from "@/env";

export const { createContext, createCaller, handler } = convexBetterAuth({
  api,
  convexSiteUrl: env.NEXT_PUBLIC_CONVEX_SITE_URL!,
});

export const getToken = async () => {
  const caller = createCaller();
  return await caller.getToken();
};
```

## API Route

Verify `apps/www/app/api/auth/[...all]/route.ts`:

```typescript
import { handler } from "@/lib/auth/server";

export const { GET, POST } = handler;
```

## Verification

- [ ] Server utilities updated
- [ ] API route exports correct methods
- [ ] TypeScript compiles

## Next

Task 2.3: Update Provider Component
