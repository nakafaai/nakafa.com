# Task 1.1: Enable User Zoom (Accessibility Fix)

## üéØ Goal

Remove the `userScalable: false` setting from the viewport configuration to allow users to zoom the website, fixing a critical WCAG 2.1 violation.

## üìç Context

**Current Issue**: Line 139 in `apps/www/app/[locale]/layout.tsx` has `userScalable: false`, which prevents users from zooming on mobile devices. This violates:
- WCAG 2.1 Success Criterion 1.4.4 (Resize text)
- WCAG 2.1 Success Criterion 1.4.10 (Reflow)

**Impact**: Users with low vision cannot zoom to 200% as required by accessibility standards.

**Why This Matters**: 
- 2.3% of the population has low vision
- Required by law in many jurisdictions (ADA, EAA)
- Google uses accessibility as a ranking factor
- Simple 5-minute fix with huge impact

## PRD

```json
{
  "category": "accessibility",
  "description": "Enable user zoom by removing userScalable: false from viewport configuration",
  "steps": [
    "Remove userScalable: false from viewport object",
    "Remove maximumScale: 5 limitation",
    "Verify zoom works on mobile devices",
    "Test layout at 200% zoom",
    "Run accessibility audit to confirm fix"
  ],
  "passes": false
}
```

## üé¨ Success Criteria

- [ ] `userScalable: false` removed from viewport config
- [ ] Can zoom to 200% on mobile devices
- [ ] Layout remains functional at all zoom levels
- [ ] No console warnings about viewport
- [ ] axe DevTools shows no zoom-related errors
- [ ] All tests pass

## Commands

```bash
# From root directory
pnpm lint
pnpm typecheck
pnpm test
```

## üìù Implementation

### Step 1: Modify Viewport Configuration

**File to modify**: `apps/www/app/[locale]/layout.tsx`

**Current code (lines 130-142)**:
```typescript
export const viewport: Viewport = {
  themeColor: [
    { media: "(prefers-color-scheme: light)", color: "#f5f5f5" },
    { media: "(prefers-color-scheme: dark)", color: "#0a0a0a" },
  ],
  width: "device-width",
  initialScale: 1,
  minimumScale: 1,
  maximumScale: 5,
  userScalable: false,  // ‚ùå REMOVE THIS LINE
  viewportFit: "cover",
  interactiveWidget: "resizes-visual",
};
```

**New code**:
```typescript
export const viewport: Viewport = {
  themeColor: [
    { media: "(prefers-color-scheme: light)", color: "#f5f5f5" },
    { media: "(prefers-color-scheme: dark)", color: "#0a0a0a" },
  ],
  width: "device-width",
  initialScale: 1,
  // Note: Not setting userScalable allows default browser zoom behavior
  // This enables users to zoom up to 500% as per WCAG requirements
  viewportFit: "cover",
  interactiveWidget: "resizes-visual",
};
```

**Changes made**:
- Removed `userScalable: false` (line 139)
- Removed `maximumScale: 5` (line 138) - no longer needed
- Removed `minimumScale: 1` (line 137) - no longer needed
- Kept all other viewport settings intact

### Step 2: Verification

**Manual testing**:
1. Open site on mobile device or Chrome DevTools mobile emulation
2. Try pinch-to-zoom gesture
3. Verify zoom works smoothly up to 200%+
4. Check layout doesn't break at high zoom levels
5. Verify all content remains accessible

**Automated testing**:
```bash
# Run linting
pnpm lint

# Run type checking
pnpm typecheck

# Run tests
pnpm test
```

**Accessibility testing**:
- Install axe DevTools browser extension
- Run audit on homepage
- Verify no "Zoom disabled" errors

---

## üöÄ Next Steps

After this task:
- Next: Task 1.2 - Add Security Headers
- Dependencies: None (can be done independently)

## üîó Related Tasks

- Task 4.1: Skip Navigation Links (other accessibility fix)
- Task 4.3: Focus Indicators (other accessibility fix)

## ‚ö†Ô∏è Important Notes

### Why Not Just Set userScalable: true?

Setting `userScalable: true` explicitly can still cause issues on some browsers. The best practice is to simply **not set it at all**, which allows the browser's default zoom behavior (which is always enabled).

### Browser Compatibility

This change works on all modern browsers:
- Chrome/Edge: ‚úÖ
- Safari: ‚úÖ
- Firefox: ‚úÖ
- Samsung Internet: ‚úÖ

### No Breaking Changes

This change:
- Doesn't affect desktop users
- Doesn't change visual appearance
- Doesn't break any existing functionality
- Only enables a feature that was incorrectly disabled

### Performance Impact

None. This is purely a configuration change with no performance implications.

---

## Progress Update Template

After completing this task, update `plans/website-audit/progress.txt`:

```txt
[YYYY-MM-DD HH:mm] Task 1.1 completed - Enable User Zoom

Key decisions:
- Removed userScalable: false to comply with WCAG 2.1
- Also removed maximumScale and minimumScale as they're unnecessary
- Kept all other viewport settings (themeColor, viewportFit, etc.)

Files changed:
- apps/www/app/[locale]/layout.tsx (lines 130-142)

Blockers/notes:
- None - straightforward change
- Verified zoom works on iOS Safari and Chrome Android
```
