# Task 2.1: Add Article Structured Data

## üéØ Goal

Implement comprehensive structured data (Schema.org) for all educational content to improve SEO, enable rich snippets, and boost search visibility.

## üìç Context

**Current State**: No structured data implemented. This hurts:
- Search engine understanding of content
- Rich snippets in search results
- Knowledge panel eligibility
- Voice search optimization

**Why This Matters**:
- Structured Data score: 46/100 (should be >80)
- Google uses structured data for rich results
- Educational content benefits greatly from Article schema
- BreadcrumbList improves navigation in search results

## PRD

```json
{
  "category": "seo",
  "description": "Add Schema.org structured data for articles, breadcrumbs, and educational content",
  "steps": [
    "Create Article structured data component",
    "Create BreadcrumbList structured data component",
    "Create Author structured data component",
    "Add structured data to content pages",
    "Add structured data to article pages",
    "Add structured data to exercise pages",
    "Test with Google Rich Results Test",
    "Validate with Schema.org validator",
    "Check Search Console for enhancements"
  ],
  "passes": false
}
```

## üé¨ Success Criteria

- [ ] Article schema on all educational content pages
- [ ] BreadcrumbList schema on all pages with hierarchy
- [ ] Author schema with proper attribution
- [ ] EducationalOccupationalCredential for courses
- [ ] All schemas validate in Rich Results Test
- [ ] No errors in Schema.org validator
- [ ] Search Console shows enhancements
- [ ] All tests pass

## Commands

```bash
# From root directory
pnpm lint
pnpm typecheck
pnpm test

# Test structured data
# Use Google Rich Results Test: https://search.google.com/test/rich-results
# Use Schema.org validator: https://validator.schema.org/
```

## üìù Implementation

### Subtask 2.1.1: Create Article Schema Component

**File to create**: `packages/seo/src/json-ld/article.tsx`

```typescript
import type { Article, WithContext } from "schema-dts";

interface ArticleJsonLdProps {
  title: string;
  description: string;
  url: string;
  image?: string;
  datePublished: string;
  dateModified?: string;
  author: {
    name: string;
    url?: string;
  };
  publisher?: {
    name: string;
    logo: string;
  };
}

export function ArticleJsonLd({
  title,
  description,
  url,
  image,
  datePublished,
  dateModified,
  author,
  publisher,
}: ArticleJsonLdProps) {
  const article: WithContext<Article> = {
    "@context": "https://schema.org",
    "@type": "Article",
    headline: title,
    description,
    url,
    image: image ? [image] : undefined,
    datePublished,
    dateModified: dateModified ?? datePublished,
    author: {
      "@type": "Person",
      name: author.name,
      url: author.url,
    },
    publisher: publisher
      ? {
          "@type": "Organization",
          name: publisher.name,
          logo: {
            "@type": "ImageObject",
            url: publisher.logo,
          },
        }
      : undefined,
  };

  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{ __html: JSON.stringify(article) }}
    />
  );
}
```

### Subtask 2.1.2: Create BreadcrumbList Schema Component

**File to create**: `packages/seo/src/json-ld/breadcrumb.tsx`

```typescript
import type { BreadcrumbList, WithContext } from "schema-dts";

interface BreadcrumbItem {
  name: string;
  url: string;
}

interface BreadcrumbJsonLdProps {
  items: BreadcrumbItem[];
}

export function BreadcrumbJsonLd({ items }: BreadcrumbJsonLdProps) {
  const breadcrumb: WithContext<BreadcrumbList> = {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: items.map((item, index) => ({
      "@type": "ListItem",
      position: index + 1,
      name: item.name,
      item: item.url,
    })),
  };

  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{ __html: JSON.stringify(breadcrumb) }}
    />
  );
}
```

### Subtask 2.1.3: Add Structured Data to Content Pages

**File to modify**: `apps/www/app/[locale]/(study)/(main)/(contents)/[...slug]/page.tsx`

Add to the page metadata/head section:

```typescript
import { ArticleJsonLd } from "@repo/seo/json-ld/article";
import { BreadcrumbJsonLd } from "@repo/seo/json-ld/breadcrumb";

// In the page component, add:
<>
  <ArticleJsonLd
    title={content.title}
    description={content.description}
    url={`https://nakafa.com/${locale}${content.path}`}
    image={content.coverImage}
    datePublished={content.createdAt}
    dateModified={content.updatedAt}
    author={{
      name: content.author.name,
      url: `https://nakafa.com/${locale}/contributor/${content.author.slug}`,
    }}
    publisher={{
      name: "Nakafa",
      logo: "https://nakafa.com/logo.svg",
    }}
  />
  <BreadcrumbJsonLd
    items={[
      { name: "Home", url: `https://nakafa.com/${locale}` },
      { name: "Subject", url: `https://nakafa.com/${locale}/subject` },
      // Add more based on actual path
    ]}
  />
</>
```

### Subtask 2.1.4: Update SEO Package Exports

**File to modify**: `packages/seo/src/index.ts`

Add exports:
```typescript
export { ArticleJsonLd } from "./json-ld/article";
export { BreadcrumbJsonLd } from "./json-ld/breadcrumb";
```

---

## üöÄ Next Steps

After this task:
- Next: Task 2.2 - Add Author Information
- Dependencies: None

## üîó Related Tasks

- Task 2.2: Author Information (E-E-A-T)
- Task 2.3: About Page (trust signals)
- Task 5.3: Breadcrumb Navigation (UX)

## ‚ö†Ô∏è Important Notes

### Schema Types to Use

**For educational content**:
- `Article` - Main content type
- `LearningResource` - For courses/materials
- `EducationalOccupationalCredential` - For certifications

**For navigation**:
- `BreadcrumbList` - Page hierarchy
- `WebPage` - Basic page info

**For organization**:
- `Organization` - Company info
- `Person` - Author info

### Testing Structured Data

1. **Rich Results Test**: https://search.google.com/test/rich-results
2. **Schema Validator**: https://validator.schema.org/
3. **Chrome DevTools**: Check "Elements" > "Event Listeners"

### Common Issues

- **Missing required fields**: Article requires headline, author, datePublished
- **Invalid URLs**: Must be absolute URLs (https://...)
- **Duplicate schemas**: Only one Article per page

---

## Progress Update Template

After completing this task, update `plans/website-audit/progress.txt`:

```txt
[YYYY-MM-DD HH:mm] Task 2.1 completed - Article Structured Data

Key decisions:
- Implemented Article schema for all educational content
- Added BreadcrumbList for navigation hierarchy
- Used schema-dts for TypeScript safety
- Added proper author attribution

Files created:
- packages/seo/src/json-ld/article.tsx
- packages/seo/src/json-ld/breadcrumb.tsx

Files modified:
- packages/seo/src/index.ts
- apps/www/app/[locale]/(study)/(main)/(contents)/[...slug]/page.tsx

Verification:
- Rich Results Test: Passed
- Schema.org validator: No errors
- Search Console: Enhancements detected

Blockers/notes:
- None
```
